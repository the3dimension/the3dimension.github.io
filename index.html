<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>3dimension Team&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="3dimension Team's Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="3dimension Team's Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="3dimension Team's Blog">
  
    <link rel="alternate" href="/atom.xml" title="3dimension Team&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">3dimension Team&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-FFmpeg-快速起步文档" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/06/FFmpeg-快速起步文档/" class="article-date">
  <time datetime="2017-02-06T04:04:25.000Z" itemprop="datePublished">2017-02-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/06/FFmpeg-快速起步文档/">FFmpeg  快速起步文档</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>认识FFmpeg</strong></p>
<p>FFMPEG堪称自由软件中最完备的一套多媒体支持库，它几乎实现了所有当下常见的数据封装格式、多媒体传输协议以及音视频编解码器。因此，对于从事多媒体技术开发的工程师来说，深入研究FFMPEG成为一门必不可少的工作，可以这样说，FFMPEG之于多媒体开发工程师的重要性正如kernel之于嵌入式系统工程师一般。</p>
<p><strong>使用FFmpeg转化video和audio就会非常简单</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ffmpeg -i input.mp4 output.avi</div></pre></td></tr></table></figure>
<p><strong>使用FFmpeg</strong></p>
<p>FFmpeg提供命令行工具ffmpeg，其中使用方法如下（方括号表示可选项，花括号表示必选项目）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ffmpeg [global options] &#123;infile options ...&#125; &#123;[outfile options] &apos;outfile&apos; ...&#125;</div></pre></td></tr></table></figure>
<p> <em>基本选项</em></p>
<ul>
<li><p>-formats：列出支持的文件格式。</p>
</li>
<li><p>-codecs：列出支持的编解码器。</p>
</li>
<li><p>-decoders：列出支持的解码器。</p>
</li>
<li><p>-encoders：列出支持的编码器。</p>
</li>
<li><p>-protocols：列出支持的协议。</p>
</li>
<li><p>-filters：列出支持的滤镜。</p>
</li>
<li><p>-pix_fmts：列出支持的图像采样格式。</p>
</li>
<li><p>-sample_fmts：列出支持的声音采样格式。</p>
</li>
</ul>
<p><em>常用输入选项</em></p>
<ul>
<li><p>-i filename：指定输入文件名。</p>
</li>
<li><p>-f fmt：强制设定文件格式，需使用能力集列表中的名称（缺省是根据扩展名选择的）。</p>
</li>
<li><p>-ss hh:mm:ss[.xxx]：设定输入文件的起始时间点，启动后将跳转到此时间点然后开始读取数据。</p>
</li>
</ul>
<p><em>下载FFmpeg</em></p>
<p>​          FFmpeg的官网<a href="https://ffmpeg.org/" target="_blank" rel="external">https://ffmpeg.org/</a></p>
<p>​          FFmpeg的源码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone https://git.ffmpeg.org/ffmpeg.git ffmpeg</div></pre></td></tr></table></figure>
<h2 id="FFmpeg的转码（RTSP协议转换RTMP直播协议）"><a href="#FFmpeg的转码（RTSP协议转换RTMP直播协议）" class="headerlink" title="FFmpeg的转码（RTSP协议转换RTMP直播协议）"></a>FFmpeg的转码（RTSP协议转换RTMP直播协议）</h2><p><strong>初步了解</strong></p>
<p>　RTSP协议也是广泛使用的直播/点播流媒体协议，最近实现了一个RTSP协议转换RTMP直播协议的程序，为的是可以接收远端设备或服务器的多路RTSP直播数据，实时转换为RTMP直播协议，推送到FMS、Red5、wowza server等RTMP服务器，以实现flash观看RTSP直播源的需求。程序同时也具备<strong>从FLV文件获取输入数据并转换RTMP直播</strong>。</p>
<p><strong>nginx-rmtp-module是<a href="http://baike.baidu.com/view/926025.htm?fr=aladdin" target="_blank" rel="external">Nginx服务器</a>的流媒体插件</strong>：</p>
<p>   Nginx本身是一个非常出色的HTTP服务器,ffmpeg是非常好的音视频解决方案.这两个东西通过一个nginx的模块nginx-rtmp-module,组合在一起即可以搭建一个功能相对比较完善的流媒体服务器.这个流媒体服务器可以支持RTMP和HLS(Live Http Stream)。nginx配合ffmpeg做流媒体服务器的原理是:nginx通过rtmp模块提供rtmp服务, ffmpeg推送一个rtmp流到nginx, 然后客户端通过访问nginx来收看实时视频流。</p>
<p>​                 <strong>:nginx-rmtp-module是一个开源的项目可以在<a href="https://github.com/arut/nginx-rtmp-module" target="_blank" rel="external">https://github.com/arut/nginx-rtmp-module</a>下载</strong></p>
<p>1下载并安装<a href="http://nginx.org/en/download.html" target="_blank" rel="external">Nginx</a></p>
<p>（现在需要使用nginx-rtmp.exe这个程序， 网上可以搜索到该软件已经集成rtmp模块的windows版本）</p>
<p><img src="/Zhu-Hai/img/1.png" alt=""></p>
<p>2.打开conf文件夹找到nginx.conf文件,配置rtmp</p>
<p><img src="/Zhu-Hai/img/2.png" alt=""></p>
<p>  3.运行cmd命令，启动nginx.exe服务（start nginx.exe：启动nginx服务，然后看进程中是否有nginx.exe）</p>
<p><img src="/Zhu-Hai/img/3.png" alt=""></p>
<p><img src="/Zhu-Hai/img/4.png" alt=""></p>
<p>4.打开网页输入：localhost或者127.0.0.1本机ip</p>
<p><img src="/Zhu-Hai/img/5.png" alt=""></p>
<p><strong>相关软件的配置及应用Nginx服务启动之后就可以执行ffmpeg命令进行rtsp协议转成rtmp</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ffmpeg -i &quot;rtsp://admin:123456@192.168.10.116:554/mpeg4 &quot; -f flv -r 25 -s 640x480 -an &quot;rtmp://192.168.8.130:1935/live/test2&quot;</div></pre></td></tr></table></figure>
<p>1.运行cmd：执行ffmpeg命令语句ffmpeg：其实就是ffmpeg.exe，运行语句的时候.exe可不要</p>
<p>-i：后面是我所需要的摄像头协议</p>
<p>-f flv：后面是我要转到nginx的rtmp服务器上</p>
<p>-s：视频解析度：（分配率）也就是能调视屏的清晰度，如果在本机上测试建议640*480就好，改变视屏流的解析式cpu会消耗很大(rtmp服务地址：rtmp://192.168.3.138:1935/myapp/test2)</p>
<p>192.168.3.138：nginx启动的机器ip</p>
<p>1935：端口号（之前在nginx.conf里配置的）</p>
<p>myapp：是application 后面的名称</p>
<p>test2：可以随便起，记得到时候访问rtmp时要一致</p>
<p><em>回车执行ffmpeg语句</em></p>
<p>成功如下图:</p>
<p><img src="/Zhu-Hai/img/6.png" alt=""></p>
<p><strong>下载VLC media player 并输入相关地址即可查看视频</strong></p>
<p>​    在<em>VLC media player</em>中打开媒体–&gt;打开网络串流–&gt;输入正确的url即可。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/02/06/FFmpeg-快速起步文档/" data-id="ciytp29nw0003lm9kbi72h2ap" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-angular2快速起步" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/21/angular2快速起步/" class="article-date">
  <time datetime="2016-11-21T13:43:41.000Z" itemprop="datePublished">2016-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/21/angular2快速起步/">angular2快速起步</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="环境：安装Node-js-and-npm"><a href="#环境：安装Node-js-and-npm" class="headerlink" title="环境：安装Node.js and npm"></a>环境：安装Node.js and npm</h2><p>我们angular2例子需要node v5.x.x 或更高版本以及 npm 3.x.x 或更高版本，可在终端窗口中运行 node -v 和 npm -v 命令检查你正在使用的版本。</p>
<h2 id="创建配置文件"><a href="#创建配置文件" class="headerlink" title="创建配置文件"></a>创建配置文件</h2><p>创建文件夹angular-quickstart并在该文件夹里面创建下列配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir angular-quickstart</div></pre></td></tr></table></figure>
<ol>
<li>package.json 用来标记出本项目所需的 npm 依赖包。</li>
<li>tsconfig.json 定义了 TypeScript 编译器如何从项目源文件生成 JavaScript 代码。</li>
<li>systemjs.config.js 为模块加载器提供了该到哪里查找应用模块的信息，并注册了所有必备的依赖包。 它还包括文档中后面的例子需要用到的包。</li>
</ol>
<p>在package.json粘贴如下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	&quot;name&quot;: &quot;angular-quickstart&quot;,</div><div class="line">	&quot;version&quot;: &quot;1.0.0&quot;,</div><div class="line">	&quot;scripts&quot;: &#123;</div><div class="line">	&quot;start&quot;: &quot;tsc &amp;&amp; concurrently \&quot;tsc -w\&quot; \&quot;lite-server\&quot; &quot;,</div><div class="line">	&quot;lite&quot;: &quot;lite-server&quot;,</div><div class="line">	&quot;tsc&quot;: &quot;tsc&quot;,</div><div class="line">	&quot;tsc:w&quot;: &quot;tsc -w&quot;</div><div class="line">	&#125;,</div><div class="line">	&quot;licenses&quot;: [</div><div class="line">	&#123;</div><div class="line">	  &quot;type&quot;: &quot;MIT&quot;,</div><div class="line">	  &quot;url&quot;: &quot;https://github.com/angular/angular.io/blob/master/LICENSE&quot;</div><div class="line">	&#125;</div><div class="line">	],</div><div class="line">	&quot;dependencies&quot;: &#123;</div><div class="line">	&quot;@angular/common&quot;: &quot;~2.1.1&quot;,</div><div class="line">	&quot;@angular/compiler&quot;: &quot;~2.1.1&quot;,</div><div class="line">	&quot;@angular/core&quot;: &quot;~2.1.1&quot;,</div><div class="line">	&quot;@angular/forms&quot;: &quot;~2.1.1&quot;,</div><div class="line">	&quot;@angular/http&quot;: &quot;~2.1.1&quot;,</div><div class="line">	&quot;@angular/platform-browser&quot;: &quot;~2.1.1&quot;,</div><div class="line">	&quot;@angular/platform-browser-dynamic&quot;: &quot;~2.1.1&quot;,</div><div class="line">	&quot;@angular/router&quot;: &quot;~3.1.1&quot;,</div><div class="line">	&quot;@angular/upgrade&quot;: &quot;~2.1.1&quot;,</div><div class="line">	&quot;angular-in-memory-web-api&quot;: &quot;~0.1.13&quot;,</div><div class="line">	&quot;core-js&quot;: &quot;^2.4.1&quot;,</div><div class="line">	&quot;reflect-metadata&quot;: &quot;^0.1.8&quot;,</div><div class="line">	&quot;rxjs&quot;: &quot;5.0.0-beta.12&quot;,</div><div class="line">	&quot;systemjs&quot;: &quot;0.19.39&quot;,</div><div class="line">	&quot;zone.js&quot;: &quot;^0.6.25&quot;</div><div class="line">	&#125;,</div><div class="line">	&quot;devDependencies&quot;: &#123;</div><div class="line">	&quot;@types/core-js&quot;: &quot;^0.9.34&quot;,</div><div class="line">	&quot;@types/node&quot;: &quot;^6.0.45&quot;,</div><div class="line">	&quot;concurrently&quot;: &quot;^3.0.0&quot;,</div><div class="line">	&quot;lite-server&quot;: &quot;^2.2.2&quot;,</div><div class="line">	&quot;typescript&quot;: &quot;^2.0.3&quot;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在tsconfig.json粘贴如下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;compilerOptions&quot;: &#123;</div><div class="line">    &quot;target&quot;: &quot;es5&quot;,</div><div class="line">    &quot;module&quot;: &quot;commonjs&quot;,</div><div class="line">    &quot;moduleResolution&quot;: &quot;node&quot;,</div><div class="line">    &quot;sourceMap&quot;: true,</div><div class="line">    &quot;emitDecoratorMetadata&quot;: true,</div><div class="line">    &quot;experimentalDecorators&quot;: true,</div><div class="line">    &quot;removeComments&quot;: false,</div><div class="line">    &quot;noImplicitAny&quot;: false</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在systemjs.config.js粘贴如下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * System configuration for Angular samples</div><div class="line"> * Adjust as necessary for your application needs.</div><div class="line"> */</div><div class="line">(function (global) &#123;</div><div class="line">  System.config(&#123;</div><div class="line">    paths: &#123;</div><div class="line">      // paths serve as alias</div><div class="line">      &apos;npm:&apos;: &apos;node_modules/&apos;</div><div class="line">    &#125;,</div><div class="line">    // map tells the System loader where to look for things</div><div class="line">    map: &#123;</div><div class="line">      // our app is within the app folder</div><div class="line">      app: &apos;app&apos;,</div><div class="line">      // angular bundles</div><div class="line">      &apos;@angular/core&apos;: &apos;npm:@angular/core/bundles/core.umd.js&apos;,</div><div class="line">      &apos;@angular/common&apos;: &apos;npm:@angular/common/bundles/common.umd.js&apos;,</div><div class="line">      &apos;@angular/compiler&apos;: &apos;npm:@angular/compiler/bundles/compiler.umd.js&apos;,</div><div class="line">      &apos;@angular/platform-browser&apos;: &apos;npm:@angular/platform-browser/bundles/platform-browser.umd.js&apos;,</div><div class="line">      &apos;@angular/platform-browser-dynamic&apos;: &apos;npm:@angular/platform-browser-dynamic/bundles/platform-browser-dynamic.umd.js&apos;,</div><div class="line">      &apos;@angular/http&apos;: &apos;npm:@angular/http/bundles/http.umd.js&apos;,</div><div class="line">      &apos;@angular/router&apos;: &apos;npm:@angular/router/bundles/router.umd.js&apos;,</div><div class="line">      &apos;@angular/forms&apos;: &apos;npm:@angular/forms/bundles/forms.umd.js&apos;,</div><div class="line">      &apos;@angular/upgrade&apos;: &apos;npm:@angular/upgrade/bundles/upgrade.umd.js&apos;,</div><div class="line">      // other libraries</div><div class="line">      &apos;rxjs&apos;:                      &apos;npm:rxjs&apos;,</div><div class="line">      &apos;angular-in-memory-web-api&apos;: &apos;npm:angular-in-memory-web-api/bundles/in-memory-web-api.umd.js&apos;</div><div class="line">    &#125;,</div><div class="line">    // packages tells the System loader how to load when no filename and/or no extension</div><div class="line">    packages: &#123;</div><div class="line">      app: &#123;</div><div class="line">        main: &apos;./main.js&apos;,</div><div class="line">        defaultExtension: &apos;js&apos;</div><div class="line">      &#125;,</div><div class="line">      rxjs: &#123;</div><div class="line">        defaultExtension: &apos;js&apos;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line">&#125;)(this);</div></pre></td></tr></table></figure>
<h2 id="安装依赖包"><a href="#安装依赖包" class="headerlink" title="安装依赖包"></a>安装依赖包</h2><p>使用 npm 命令来安装上面 package.json 中列出的依赖包。请在终端窗口 ( 或 Windows 的 cmd 窗口 ) 中输入下列命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install</div></pre></td></tr></table></figure>
<p>在安装期间可能出现红色的错误信息，你还会看到 npm WARN 信息。不过不用担心，只要末尾处没有 npm ERR! 信息就算成功了。<br>完成后应出现如下结构：<br><img src="/Wei-Chen/img/angularTree1.png" alt=""></p>
<h2 id="创建应用"><a href="#创建应用" class="headerlink" title="创建应用"></a>创建应用</h2><p>在应用的根目录下创建 app 子目录：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir app</div></pre></td></tr></table></figure>
<p>在app下创建app/app.module.ts 文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">import &#123; NgModule &#125;      from &apos;@angular/core&apos;;</div><div class="line">import &#123; BrowserModule &#125; from &apos;@angular/platform-browser&apos;;</div><div class="line"></div><div class="line">@NgModule(&#123;</div><div class="line">  imports:      [ BrowserModule ]</div><div class="line">&#125;)</div><div class="line">export class AppModule &#123; &#125;</div></pre></td></tr></table></figure>
<p>这是我们应用的入口，由于我们是浏览器中的 Web 应用，所以根模块需要从 @angular/platform-browser 中导入 BrowserModule 并添加到 imports 数组中。</p>
<h2 id="创建组件并添加到应用中"><a href="#创建组件并添加到应用中" class="headerlink" title="创建组件并添加到应用中"></a>创建组件并添加到应用中</h2><p>每个 Angular 应用都至少有一个组件： 根组件 ，这里名叫 AppComponent 。每个组件都会通过与它相关的模板来控制屏幕上的一小块（视图）。</p>
<p>创建组件文件 app/app.component.ts:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">import &#123; Component &#125; from &apos;@angular/core&apos;;</div><div class="line">@Component(&#123;</div><div class="line">  selector: &apos;my-app&apos;,</div><div class="line">  template: &apos;&lt;h1&gt;My First Angular App&lt;/h1&gt;&apos;</div><div class="line">&#125;)</div><div class="line">export class AppComponent &#123; &#125;</div></pre></td></tr></table></figure>
<p>从上可以看到组件的基本结构：</p>
<ol>
<li><p><strong>import 语句</strong> 。它让你能访问 Angular 核心库中的 @Component 装饰器函数 。</p>
</li>
<li><p><strong>@Component 装饰器</strong> ，它会把一份 <strong>元数据</strong> 关联到 AppComponent 组件类上：</p>
<p>(1)<strong>selector</strong> 为用来代表该组件的 HTML 元素指定简单的 CSS 选择器。</p>
<p>(2)<strong>template</strong> 用来告诉 Angular 如何渲染该组件的视图。</p>
</li>
<li><p><strong>组件类</strong> 通过它的模板来控制视图的外观和行为。这里，你只有一个根组件 AppComponent 。由于这个简单的 QuickStart 范例中并不需要应用逻辑，因此它是空的。</p>
</li>
</ol>
<p>然后我们要导入上面的 AppComponent 类，需要修改 app/app.module.ts 文件如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">import &#123; NgModule &#125;      from &apos;@angular/core&apos;;</div><div class="line">import &#123; BrowserModule &#125; from &apos;@angular/platform-browser&apos;;</div><div class="line">import &#123; AppComponent &#125;   from &apos;./app.component&apos;;</div><div class="line">@NgModule(&#123;</div><div class="line">  imports:      [ BrowserModule ],</div><div class="line">  declarations: [ AppComponent ],</div><div class="line">  bootstrap:    [ AppComponent ]</div><div class="line">&#125;)</div><div class="line">export class AppModule &#123; &#125;</div></pre></td></tr></table></figure>
<h2 id="启动应用"><a href="#启动应用" class="headerlink" title="启动应用"></a>启动应用</h2><p>那么如何启动上面的应用呢？需要创建 <strong>main.ts</strong> 让angular加载上面创建的根组件， main.ts如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">import &#123; platformBrowserDynamic &#125; from &apos;@angular/platform-browser-dynamic&apos;;</div><div class="line">import &#123; AppModule &#125; from &apos;./app.module&apos;;</div><div class="line">const platform = platformBrowserDynamic();</div><div class="line">platform.bootstrapModule(AppModule);</div></pre></td></tr></table></figure>
<p><strong>为什么要分别创建 main.ts 、应用模块 和应用组件的文件呢？</strong></p>
<p>应用的引导过程与 创建模块或者 展现视图是相互独立的关注点。如果该组件不会试图运行整个应用，那么测试它就会更容易。</p>
<h2 id="定义该应用的宿主页面"><a href="#定义该应用的宿主页面" class="headerlink" title="定义该应用的宿主页面"></a>定义该应用的宿主页面</h2><p>在 angular-quickstart目录下创建 index.html 文件，内容如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;html&gt;</div><div class="line">  &lt;head&gt;</div><div class="line">    &lt;title&gt;Angular QuickStart&lt;/title&gt;</div><div class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</div><div class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</div><div class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;styles.css&quot;&gt;</div><div class="line">    &lt;!-- 1. Load libraries --&gt;</div><div class="line">     &lt;!-- Polyfill(s) for older browsers --&gt;</div><div class="line">    &lt;script src=&quot;node_modules/core-js/client/shim.min.js&quot;&gt;&lt;/script&gt;</div><div class="line">    &lt;script src=&quot;node_modules/zone.js/dist/zone.js&quot;&gt;&lt;/script&gt;</div><div class="line">    &lt;script src=&quot;node_modules/reflect-metadata/Reflect.js&quot;&gt;&lt;/script&gt;</div><div class="line">    &lt;script src=&quot;node_modules/systemjs/dist/system.src.js&quot;&gt;&lt;/script&gt;</div><div class="line">    &lt;!-- 2. Configure SystemJS --&gt;</div><div class="line">    &lt;script src=&quot;systemjs.config.js&quot;&gt;&lt;/script&gt;</div><div class="line">    &lt;script&gt;</div><div class="line">      System.import(&apos;app&apos;).catch(function(err)&#123; console.error(err); &#125;);</div><div class="line">    &lt;/script&gt;</div><div class="line">  &lt;/head&gt;</div><div class="line">  &lt;!-- 3. Display the application --&gt;</div><div class="line">  &lt;body&gt;</div><div class="line">    &lt;my-app&gt;Loading...&lt;/my-app&gt;</div><div class="line">  &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>JavaScript 库： core-js 是为老式浏览器提供的填充库， zone.js 和 reflect-metadata 库是 Angular 需要的，而 SystemJS 库是用来做模块加载的。</p>
<p>SystemJS 的配置文件和一段脚本，它导入并运行了我们刚刚在 main 文件中写的 app 模块。</p>
<p><body> 中的 <my-app> 标签是 应用程序生活的地方！</my-app></body></p>
<p><strong>添加样式</strong><br>在 angular-quickstart目录下创建 styles.css 文件，内容如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">/* Master Styles */</div><div class="line">h1 &#123;</div><div class="line">  color: #369;</div><div class="line">  font-family: Arial, Helvetica, sans-serif;</div><div class="line">  font-size: 250%;</div><div class="line">&#125;</div><div class="line">h2, h3 &#123;</div><div class="line">  color: #444;</div><div class="line">  font-family: Arial, Helvetica, sans-serif;</div><div class="line">  font-weight: lighter;</div><div class="line">&#125;</div><div class="line">body &#123;</div><div class="line">  margin: 2em;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="编译并运行应用程序"><a href="#编译并运行应用程序" class="headerlink" title="编译并运行应用程序"></a>编译并运行应用程序</h2><p>打开终端窗口，并输入如下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm start</div></pre></td></tr></table></figure>
<p>该命令会同时运行两个并行的 node 进程：</p>
<ol>
<li>TypeScript 编译器运行在监听模式。</li>
<li>一个名叫 lite-server 的静态文件服务器，它把 index.html 加载到浏览器中，并且在该应用中的文件发生变化时刷新浏览器。</li>
</ol>
<p>稍后，一个浏览器页标签就会打开并显示出来,如下图：</p>
<p><img src="/Wei-Chen/img/angularFirstApp.png" alt=""></p>
<p>最终的目录结构如下（此图包含了其他的文件）：</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/21/angular2快速起步/" data-id="ciytp29o9000alm9k8n68sjij" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/angular2/">angular2</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-NodeJS-异步编程的简解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/21/NodeJS-异步编程的简解/" class="article-date">
  <time datetime="2016-11-21T13:42:45.000Z" itemprop="datePublished">2016-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/21/NodeJS-异步编程的简解/">NodeJS 异步编程的简解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>于sqlite3中的实践简析</p>
<blockquote>
<p>工作所需，开始接触到node编程，本身接触不多，就结合工作简单介绍下node最大特点–异步编程。个人认为，异步相比于同步最大的区别就是在于对阻塞共享资源进行操作时代码执行的延时性，具体对于我的工作而言，就是后台服务端怎么确保对sqlite3数据库所有相关操作结束后再返回给前台一个执行结果。这对这个问题，node给我们提供了事件发布/订阅模式、Promise/Deferred模式、流程控制库这三种主要模式，在这我是用了后两者,就介绍一下吧。</p>
<h2 id="1、流程控制库实现异步编程"><a href="#1、流程控制库实现异步编程" class="headerlink" title="1、流程控制库实现异步编程"></a>1、流程控制库实现异步编程</h2><p>在这儿选取最知名的流程控制流程控制模块–async，其本身提供了20多种API，在这儿呢我介绍4种典型且常用的协作模式： series、waterfall、each与eachseries，关于模块调用如下：</p>
<p>-安装： ’ npm install async -g’</p>
<p>-调用：‘ var async = require（’async‘）；’</p>
<p>series和waterfall的控制模式类似，都是所谓的“异步的串行执行”，区别在于series实现一系列函数的串行执行但互相间不存在回调依赖；对应的waterfall模式则是一个函数的执行依赖于其上一个函数的回调。至于异常处理，所有模式类似–一旦某个函数出现异常，最终回调函数立马触发进行异常捕捉和处理。具体的模式和相关代码如下：</p>
<p>模式： -series：        ‘ async.series([function],callback);   ‘</p>
<p>​             -waterfall:      ‘ async.waterfall([function],callback);   ‘</p>
<p>代码：series–对于表A，根据关联键值tid先删除其中用户user的表项在插入输入的新表</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">&gt; <span class="keyword">async</span>.series([<span class="function"><span class="keyword">function</span> <span class="title">delete</span> (<span class="params">callback</span>)</span>&#123;</div><div class="line">&gt;</div><div class="line">&gt;                db.run(<span class="string">"delete from A  where tid = ?"</span>,tid,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</div><div class="line">&gt;</div><div class="line">&gt;                            <span class="keyword">async</span>.series([<span class="function"><span class="keyword">function</span> <span class="title">delete</span> (<span class="params">callback</span>)</span>&#123;</div><div class="line">&gt;</div><div class="line">&gt;                           db.run(<span class="string">"delete from A  where tid = ?"</span>,tid,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</div><div class="line">&gt;</div><div class="line">&gt;                               <span class="keyword">if</span> (err) &#123;</div><div class="line">&gt;</div><div class="line">&gt;                                         callback(err);&#125;<span class="comment">//db操作出错，回调错误</span></div><div class="line">&gt;</div><div class="line">&gt;                               <span class="keyword">else</span> &#123;</div><div class="line">&gt;</div><div class="line">&gt;                                       callback();      &#125;<span class="comment">//操作正常，回调为null</span></div><div class="line">&gt;</div><div class="line">&gt;                             &#125;);</div><div class="line">&gt;</div><div class="line">&gt;                             &#125;,</div><div class="line">&gt;</div><div class="line">&gt;                <span class="function"><span class="keyword">function</span>  <span class="title">insert</span>  (<span class="params">callback</span>)</span>&#123;</div><div class="line">&gt;</div><div class="line">&gt;                   db.run(<span class="string">"insert into A (tid,uid) values (?,user)"</span>,tid,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</div><div class="line">&gt;</div><div class="line">&gt;                             <span class="keyword">if</span> (err) &#123;</div><div class="line">&gt;</div><div class="line">&gt;                                         callback(err);&#125; </div><div class="line">&gt;</div><div class="line">&gt;                             <span class="keyword">else</span> &#123;</div><div class="line">&gt;</div><div class="line">&gt;                                         callback();  &#125; &#125;);</div><div class="line">&gt;</div><div class="line">&gt;                            &#125;    ],             </div><div class="line">&gt;</div><div class="line">&gt;                            <span class="comment">//最终处理</span></div><div class="line">&gt;</div><div class="line">&gt;                  <span class="function"><span class="keyword">function</span> （<span class="title">results</span>）</span>&#123;</div><div class="line">&gt;</div><div class="line">&gt;                     <span class="keyword">if</span> （results&#125;&#123;</div><div class="line">&gt;</div><div class="line">&gt;                            <span class="built_in">console</span>.log(<span class="string">"ERROR :"</span>+results);&#125;</div><div class="line">&gt;</div><div class="line">&gt;                           <span class="keyword">return</span>  callback(results);</div><div class="line">&gt;</div><div class="line">&gt;                       <span class="keyword">else</span> &#123;</div><div class="line">&gt;</div><div class="line">&gt;                          <span class="keyword">return</span>  callbacl(success);&#125;</div><div class="line">&gt;</div><div class="line">&gt;                          &#125; );</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<p>&gt;</p>
<blockquote>
<p>   waterfall:     表B跟关联表A中依次插入新的表项</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">&gt;   <span class="keyword">async</span>.waterfall( [<span class="function"><span class="keyword">function</span> <span class="title">insertB</span> (<span class="params">callback</span>)</span>&#123;                  </div><div class="line">&gt;                       db.get(<span class="string">"insert into B set user = ?"</span>,user,<span class="function"><span class="keyword">function</span>(<span class="params">err,row</span>)</span>&#123;</div><div class="line">&gt;                           <span class="keyword">var</span> msg = &#123;<span class="attr">status</span> : <span class="literal">true</span>&#125;;</div><div class="line">&gt;                           <span class="keyword">if</span> (err)&#123;</div><div class="line">&gt;                             msg.status = <span class="literal">false</span> ;</div><div class="line">&gt;                             msg.error  = err;</div><div class="line">&gt;                             callback(msg);</div><div class="line">&gt;                           &#125;</div><div class="line">&gt;                           <span class="keyword">else</span> &#123;</div><div class="line">&gt;                             msg.result = row.tid;</div><div class="line">&gt;                             callback(msg);</div><div class="line">&gt;                           &#125;</div><div class="line">&gt;                           &#125; &#125;,</div><div class="line">&gt;                      <span class="function"><span class="keyword">function</span> <span class="title">insertA</span> (<span class="params">result,callback</span>) </span>&#123;</div><div class="line">&gt;                         <span class="keyword">if</span> (result.status == <span class="literal">false</span> )&#123;</div><div class="line">&gt;                                  callback(result);&#125;</div><div class="line">&gt;                         <span class="keyword">else</span> &#123;</div><div class="line">&gt;                         db.run(<span class="string">"insert into A where tid = ?"</span>,result.result,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</div><div class="line">&gt;                           <span class="keyword">if</span> (err)&#123;</div><div class="line">&gt;                             result.status = <span class="literal">false</span> ;</div><div class="line">&gt;                             result.error  =  err;</div><div class="line">&gt;                             callback(result);</div><div class="line">&gt;                           &#125;</div><div class="line">&gt;                           <span class="keyword">else</span> &#123;</div><div class="line">&gt;                             callback(result);</div><div class="line">&gt;                           &#125;</div><div class="line">&gt;                         &#125;</div><div class="line">&gt;                         &#125;</div><div class="line">&gt;                      &#125;],</div><div class="line">&gt;                      <span class="function"><span class="keyword">function</span>(<span class="params">results</span>)</span>&#123;</div><div class="line">&gt;                        <span class="keyword">if</span> (results.status == <span class="literal">false</span> )&#123;</div><div class="line">&gt;                          <span class="built_in">console</span>.log(<span class="string">"ERROR :"</span>+results.error);</div><div class="line">&gt;                          <span class="keyword">return</span> callback(results.error);</div><div class="line">&gt;                        &#125;</div><div class="line">&gt;                        <span class="keyword">else</span> &#123;</div><div class="line">&gt;                          <span class="keyword">return</span> callback(success);&#125;</div><div class="line">&gt;                      &#125;</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<p>&gt;</p>
<blockquote>
<p>each 跟eachseries 都是对于一系列大量SQL语句的集合操作，区别在于eachseries是逐条一个个执行SQL语句，而each可以全部执行不分排序。</p>
<p>模式： ‘async.each/eachseries(SQLARR,function(singlesql,callback){},function(err,result){});’</p>
<p>代码里面的SQLARR是即将执行的sql语句的字符化集合，singlesql为前面集合的每一项。</p>
<h2 id="2、Promise-Deferred模式"><a href="#2、Promise-Deferred模式" class="headerlink" title="2、Promise/Deferred模式"></a>2、Promise/Deferred模式</h2><p>关于该模式，重点需要记住两项：一是promise是一个带有”.then()”方法的函数对象，then方法定义了该函数对象的状态转化（error 或者 done ，分别对应于处理函数的resolve和reject）；二是promise 状态转化后生成的是一个新的promise对象，它与前者可以理解为链式的引用，这样我可以利用对处理函数的表达实现整个异步流程的链式的编程风格。在这儿我举一个简单的读取两个文件的例子（可以以此类推）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt; var promise = readFile()</div><div class="line">&gt; var promise2 = promise.then(function (data) &#123;</div><div class="line">&gt;   return readAnotherFile() // 如果readFile成功，执行readAnotherFile</div><div class="line">&gt; &#125;, function (err) &#123;</div><div class="line">&gt;   console.error(err) // 如果readFile不成功，记录，但是还是执行readAnotherFile</div><div class="line">&gt;   return readAnotherFile()</div><div class="line">&gt; &#125;)</div><div class="line">&gt; promise2.then(console.log, console.error) // readAnotherFile函数的执行结果</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<p>&gt;</p>
<blockquote>
<p>在实际程序应用中，针对查询多项数据且每条数据关联多项他表时，我利用bluebird模块，循环创建多个promise对象，等所有内容查询完毕时执行回调，代码如下：</p>
<p>‘ var Promise1 = require(‘bluebird’);’</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/21/NodeJS-异步编程的简解/" data-id="ciytp29o50008lm9k591itg5c" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NodeJS-异步/">NodeJS 异步</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-自定义指令的学习和路由的学习" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/21/自定义指令的学习和路由的学习/" class="article-date">
  <time datetime="2016-11-21T13:42:20.000Z" itemprop="datePublished">2016-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/21/自定义指令的学习和路由的学习/">自定义指令的学习和路由的学习</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>​       在angualrjs中，它本身自带的指令有时候往往无法满足我们的要求，所以在我们的学习和应用中，都会应用到自定义的指令。下面就让我们来一起学习自定义指令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">1:自定义指令用的是directive来定义的，里面由两个参数，第一个是自定义指令的姓名，用单引号或者双引号都可以</div><div class="line">2:第二个是一个回调函数，函数里面是一个返回函数</div><div class="line">3:返回值是一个对象，用来描述我们自定义指令的</div><div class="line">描述自定义指令由一些属性</div><div class="line"> restrict:</div><div class="line">     表示自定义指令的类型，主要有四大类 ECMA ，这四类书写顺序是乐意的，可以组合使用</div><div class="line">            E:自定义元素的类型：</div><div class="line">              语法：例如&lt;my-title&gt;&lt;my-title&gt;</div><div class="line">               这时我们自定义了一个&lt;my-title&gt;的元素</div><div class="line">            C:class类的自定义指令</div><div class="line">               语法&lt;div class = &quot;my-title&quot;&gt;&lt;/div&gt;</div><div class="line">            M:注释指令（应用很少）</div><div class="line">               语法：&lt;!--directive:my-title --&gt;</div><div class="line">            A:元素属性自定义指令</div><div class="line">               语法：&lt;div mt-title&gt;&lt;/div&gt;</div><div class="line">    template:表示自定义指令模板</div><div class="line">    replace：表示是否替换该元素（dom中的元素是否删除）</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"myApp"</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">my-title</span>&gt;</span><span class="tag">&lt;/<span class="name">my-title</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">my-title</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"my-title"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">          <span class="keyword">var</span> app = angular.module(<span class="string">'myApp'</span>,[]);</div><div class="line">          app.directive(<span class="string">'myTitle'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> &#123;</div><div class="line">                <span class="attr">restrict</span>:<span class="string">"ECMA"</span>,</div><div class="line">                <span class="attr">template</span>:<span class="string">"&lt;h1&gt;这是我的第一个自定义指令&lt;/h1&gt;"</span></div><div class="line">            &#125;</div><div class="line">          &#125;)</div><div class="line">      <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="自定义指令的作用域问题"><a href="#自定义指令的作用域问题" class="headerlink" title="自定义指令的作用域问题:"></a>自定义指令的作用域问题:</h2><p><img src="file:///C:/Users/Administrator/AppData/Local/YNote/data/qq843D59EAF5B87956724BDF0750EE0589/eba0121c101644c7996a27312ee8681a/clipboard.png" alt="img"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"MyApp"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"first"</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span>=<span class="string">"name"</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"name"</span> <span class="attr">show-msg</span>=<span class="string">"111"</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">show-msg</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'MyApp'</span>,[]);</div><div class="line">    app.controller(<span class="string">"first"</span>,<span class="function"><span class="keyword">function</span> (<span class="params">$scope</span>) </span>&#123;</div><div class="line">        $scope.name = <span class="string">"李白"</span>;</div><div class="line"></div><div class="line">    &#125;)</div><div class="line">    app.directive(<span class="string">'showMsg'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">       <span class="keyword">return</span> &#123;</div><div class="line">           <span class="attr">restrict</span>:<span class="string">"ECMA"</span>,</div><div class="line">           <span class="attr">template</span>:<span class="string">"&lt;h2&gt;&#123;&#123;age&#125;&#125; | &#123;&#123;name&#125;&#125;&lt;/h2&gt;"</span>,</div><div class="line">           <span class="attr">controller</span>:<span class="function"><span class="keyword">function</span> (<span class="params">$scope,$element,$attrs</span>) </span>&#123;</div><div class="line">               $scope.name = <span class="string">"张三"</span>;</div><div class="line">               $scope.age = <span class="string">"100岁"</span>;</div><div class="line">           &#125;,</div><div class="line">           <span class="attr">scope</span>:<span class="literal">false</span></div><div class="line">         <span class="comment">//  scope:true</span></div><div class="line">          <span class="comment">// scope:&#123;&#125;</span></div><div class="line">       &#125;</div><div class="line">    &#125;);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="简单的自定义方法是实现"><a href="#简单的自定义方法是实现" class="headerlink" title="简单的自定义方法是实现"></a>简单的自定义方法是实现</h1><p>​       </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">ng-app</span>=<span class="string">"myApp"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  //渲染三次</div><div class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">repeat-num</span>=<span class="string">"3"</span>&gt;</span>陈文冰<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'myApp'</span>,[]);</div><div class="line">    app.directive(<span class="string">'repeatNum'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            <span class="attr">restrict</span>:<span class="string">"A"</span>,</div><div class="line">          <span class="comment">//通过使用Link方法来自定义方法</span></div><div class="line">          <span class="comment">//scope是作用域</span></div><div class="line">          <span class="comment">//jqlite可以获得自定义指令的对象</span></div><div class="line">          <span class="comment">//attrs可以获得自定义方法的属性</span></div><div class="line">            link:<span class="function"><span class="keyword">function</span> (<span class="params">scope,jqlite,attrs</span>) </span>&#123;</div><div class="line">               <span class="comment">// console.log(this)</span></div><div class="line">               <span class="comment">// console.log(arguments)</span></div><div class="line">              <span class="keyword">var</span> num = attrs.repeatNum;</div><div class="line">                <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;num;i++)&#123;</div><div class="line">                    <span class="keyword">var</span> domn = jqlite.clone();</div><div class="line">                     jqlite.after(domn);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;)</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="路由的学习"><a href="#路由的学习" class="headerlink" title="路由的学习"></a>路由的学习</h1><h3 id="路由大致分为两种"><a href="#路由大致分为两种" class="headerlink" title="路由大致分为两种"></a>路由大致分为两种</h3><p>​    一类是指令路由，依赖的代码库是 angular-route</p>
<p>​    一类是 ui 路由，依赖的代码库是 angular-ui-router</p>
<p>​    指令路由是对angularjs的ng指令的拓展</p>
<p>​    ui路由是对angularjs的ui 指令的拓展</p>
<h4 id="我们首先来学习指令路由"><a href="#我们首先来学习指令路由" class="headerlink" title="我们首先来学习指令路由"></a>我们首先来学习指令路由</h4><p>​    第一步:首先引入angular-route代码库</p>
<p>​    第二步:在页面中通过ng-view来定义路由视图容器</p>
<p>   第三步:在module的依赖集合中引入ngRoute</p>
<p>   第四步:在config中定义路由信息</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"myApp"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>导航模块<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"main"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#/"</span>&gt;</span>美食<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#/ccc"</span>&gt;</span>旅游<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#/bbb"</span>&gt;</span>飞机<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#/abc"</span>&gt;</span>美女<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-view</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/angular-route.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> app = angular.module(<span class="string">'myApp'</span>,[<span class="string">'ngRoute'</span>])</div><div class="line">    </div><div class="line">    app.config(<span class="function"><span class="keyword">function</span> (<span class="params">$routeProvider</span>) </span>&#123;</div><div class="line">        $routeProvider</div><div class="line">                .when(<span class="string">'/'</span>,&#123;</div><div class="line">                    <span class="attr">template</span>:<span class="string">"&lt;h1&gt;这是我的第一个路由&lt;/h1&gt;&gt;"</span></div><div class="line">                &#125;)</div><div class="line">                .when(<span class="string">'/abc'</span>,&#123;</div><div class="line">                    <span class="attr">template</span>:<span class="string">"&lt;h1&gt;hgelloeoe&lt;/h1&gt;&gt;"</span></div><div class="line">                &#125;)</div><div class="line">                .when(<span class="string">'/ccc'</span>,&#123;</div><div class="line">                    <span class="attr">template</span>:<span class="string">"&lt;h1&gt;cccccc&lt;/h1&gt;&gt;"</span></div><div class="line">                &#125;)</div><div class="line">                .when(<span class="string">'/bbb'</span>,&#123;</div><div class="line">                    <span class="attr">template</span>:<span class="string">"&lt;h1&gt;bbbbbbb&lt;/h1&gt;&gt;"</span>,</div><div class="line">                    <span class="attr">controller</span>:<span class="string">'main'</span></div><div class="line">                &#125;)</div><div class="line">        <span class="comment">//定义默认的路径</span></div><div class="line">                .otherwise(&#123;</div><div class="line">                    <span class="attr">redirectTo</span>:<span class="string">"/"</span></div><div class="line">                &#125;)</div><div class="line">    &#125;);</div><div class="line">    app.controller(<span class="string">'main'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">$scope</span>) </span>&#123;</div><div class="line">        $scope.message = <span class="string">"hahahhahahahaha哈哈哈哈哈"</span>;</div><div class="line">    &#125;)</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="ui路由的学习"><a href="#ui路由的学习" class="headerlink" title="ui路由的学习"></a>ui路由的学习</h1><p>   第一步:首先引入angular-ui-router代码库</p>
<p>​    第二步:在页面中通过ui-view来定义路由视图容器</p>
<p>   第三步:在module的依赖集合中引入ui.Route</p>
<p>   第四步:在config中定义路由信息</p>
<p>App.js</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">var myApp = angular.module("myApp", ['ui.router']);</div><div class="line"></div><div class="line">myApp.config(function ($stateProvider, $urlRouterProvider) &#123;</div><div class="line">//定义默认的引入</div><div class="line">    $urlRouterProvider.when("", "/PageTab");</div><div class="line"></div><div class="line">    $stateProvider</div><div class="line">        .state("PageTab", &#123;</div><div class="line">            url: "/PageTab",</div><div class="line">            templateUrl: "PageTab.html"</div><div class="line">        &#125;)</div><div class="line">        .state("PageTab.Page1", &#123;</div><div class="line">            url:"/Page1",</div><div class="line">            templateUrl: "Page1.html"</div><div class="line">        &#125;)</div><div class="line">        .state("PageTab.Page2", &#123;</div><div class="line">            url:"/Page243",//路径</div><div class="line">            templateUrl: "Page2.html"</div><div class="line">        &#125;)</div><div class="line">        .state("PageTab.Page3", &#123;</div><div class="line">            url:"/Page3343",</div><div class="line">            templateUrl: "Page3.html"</div><div class="line">        &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/angular-ui-router.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"App.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"myApp"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>AngularJS Home Page (Ui-router Demonstration)<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--显示路由--&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">ui-view</span>&gt;</span><span class="tag">&lt;/<span class="name">ui-view</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>PageTag.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"width:100px"</span> <span class="attr">ui-sref</span>=<span class="string">".Page1"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>Page-1<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"width:100px"</span> <span class="attr">ui-sref</span>=<span class="string">".Page2"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>Page-2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"width:100px"</span> <span class="attr">ui-sref</span>=<span class="string">".Page3"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>Page-3<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">ui-view</span>&gt;</span><span class="tag">&lt;/<span class="name">ui-view</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>page1.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Page 1 content goes here...<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>page2.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Page 222222222222222 content goes here...<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>page3.html</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/21/自定义指令的学习和路由的学习/" data-id="ciytp29oj000llm9kydfvhizi" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AngularJs-路由/">AngularJs 路由</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-用Service结合Activity完成自己的播放器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/21/用Service结合Activity完成自己的播放器/" class="article-date">
  <time datetime="2016-11-21T13:41:24.000Z" itemprop="datePublished">2016-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/21/用Service结合Activity完成自己的播放器/">用Service结合Activity完成自己的播放器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-Service介绍"><a href="#1-Service介绍" class="headerlink" title="1.Service介绍"></a>1.Service介绍</h2><p>​    作为Android四大组件之一，想必有非常打的功用。那么这个公用可以干什么呢？他可以帮你在后台帮你做不需要与UI相关的事，例如做长连接的时候需要保持心跳啊，这种就可以用Service来做。有人说那不有点像线程，做一个心跳保持连接不就好了吗？虽然这话不假，但是这是错误的，第一，他不像为了去做通信连接不能再UI线程中启用，就去起个工作线程去跑。而是在后台做自己的事，没有与前台交互（有可能有那么一点，或者说获得相关的事例也是可以操作的）；第二，其实Service也是UI线程里的，哪有人说，那怎么去做长连接通信呢，同样你也要去起线程的。</p>
<p>​    说成这样不知道大家理解了没有。下面回归正题，直接上代码。</p>
<h2 id="2-Service一般写法"><a href="#2-Service一般写法" class="headerlink" title="2.Service一般写法"></a>2.Service一般写法</h2><p>​    以下代码是Service的一般写法和通用写法，为了是在Activity绑定Service然后产生myService的事例。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">myService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> IBinder binder = <span class="keyword">new</span> MyBinder();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MusicService</span><span class="params">()</span> </span>&#123;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">onStartCommand</span><span class="params">(Intent intent, <span class="keyword">int</span> flags, <span class="keyword">int</span> startId)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.onStartCommand(intent, flags, startId);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> IBinder <span class="title">onBind</span><span class="params">(Intent intent)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> binder;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBinder</span> <span class="keyword">extends</span> <span class="title">Binder</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> MusicService <span class="title">getService</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> MusicService.<span class="keyword">this</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>​    对应Activity的代码如下：绑定Service拿到mySevice实例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> ServiceConnection sc = <span class="keyword">new</span> ServiceConnection() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onServiceConnected</span><span class="params">(ComponentName componentName, IBinder iBinder)</span> </span>&#123;</div><div class="line">            myService = ((myService.MyBinder) iBinder).getService();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onServiceDisconnected</span><span class="params">(ComponentName componentName)</span> </span>&#123;</div><div class="line">            myService = <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">bindServiceConnection</span><span class="params">()</span> </span>&#123;</div><div class="line">        Intent intent = <span class="keyword">new</span> Intent(*******.<span class="keyword">this</span>, myService.class);</div><div class="line">        startService(intent);</div><div class="line">        bindService(intent, sc, <span class="keyword">this</span>.BIND_AUTO_CREATE);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h2 id="3-用Service做一个属于自己的播放器"><a href="#3-用Service做一个属于自己的播放器" class="headerlink" title="3.用Service做一个属于自己的播放器"></a>3.用Service做一个属于自己的播放器</h2><p>MusicService:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MusicService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">final</span> IBinder binder = <span class="keyword">new</span> MyBinder();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;MusicInfo&gt; <span class="title">getMusicDir</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> musicDir;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMusicDir</span><span class="params">(ArrayList&lt;MusicInfo&gt; musicDir)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.musicDir = musicDir;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> ArrayList&lt;MusicInfo&gt; musicDir;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> musicIndex = <span class="number">0</span>;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> MediaPlayer mp = <span class="keyword">new</span> MediaPlayer();</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Boolean I$Initial = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MusicService</span><span class="params">()</span> </span>&#123;</div><div class="line">        musicDir = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">onStartCommand</span><span class="params">(Intent intent, <span class="keyword">int</span> flags, <span class="keyword">int</span> startId)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.onStartCommand(intent, flags, startId);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> IBinder <span class="title">onBind</span><span class="params">(Intent intent)</span> </span>&#123;</div><div class="line">        <span class="comment">// <span class="doctag">TODO:</span> Return the communication channel to the service.</span></div><div class="line">        <span class="comment">//throw new UnsupportedOperationException("Not yet implemented");</span></div><div class="line">        <span class="keyword">return</span> binder;</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addMusic</span><span class="params">(MusicInfo MusicPath)</span> </span>&#123;</div><div class="line">        musicDir.add(MusicPath);</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            mp.reset();</div><div class="line">            mp.setDataSource(musicDir.get(musicDir.size()-<span class="number">1</span>).getMusicPath());</div><div class="line">            mp.prepare();</div><div class="line">            I$Initial = <span class="keyword">true</span>;</div><div class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">playOrPause</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mp.isPlaying()) &#123;</div><div class="line">            mp.pause();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            mp.start();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mp != <span class="keyword">null</span>) &#123;</div><div class="line">            mp.stop();</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                mp.prepare();</div><div class="line">                mp.seekTo(<span class="number">0</span>);</div><div class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">nextMusic</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mp != <span class="keyword">null</span> &amp;&amp; musicIndex &lt; <span class="number">3</span>) &#123;</div><div class="line">            mp.stop();</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                mp.reset();</div><div class="line">                mp.setDataSource(musicDir.get(musicIndex + <span class="number">1</span>).getMusicPath());</div><div class="line">                musicIndex++;</div><div class="line">                mp.prepare();</div><div class="line">                mp.seekTo(<span class="number">0</span>);</div><div class="line">                mp.start();</div><div class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">                KLog.d(<span class="string">"hint"</span>, <span class="string">"can't jump next music"</span>);</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">preMusic</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mp != <span class="keyword">null</span> &amp;&amp; musicIndex &gt; <span class="number">0</span>) &#123;</div><div class="line">            mp.stop();</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                mp.reset();</div><div class="line">                mp.setDataSource(musicDir.get(musicIndex - <span class="number">1</span>).getMusicPath());</div><div class="line">                musicIndex--;</div><div class="line">                mp.prepare();</div><div class="line">                mp.seekTo(<span class="number">0</span>);</div><div class="line">                mp.start();</div><div class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">                KLog.d(<span class="string">"hint"</span>, <span class="string">"can't jump pre music"</span>);</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBinder</span> <span class="keyword">extends</span> <span class="title">Binder</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> MusicService <span class="title">getService</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> MusicService.<span class="keyword">this</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>播放器界面：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PlayMusicActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> MusicService musicService;</div><div class="line">    <span class="keyword">private</span> SeekBar MusicSeekBar;</div><div class="line">    <span class="keyword">private</span> TextView MusicTime, MusicCurrentTime, MusicName;</div><div class="line">    <span class="keyword">private</span> ImageView btnPlayOrPause, ic_list, adjustVolume, MusicAlbumCover;</div><div class="line">    <span class="keyword">private</span> Handler handler;</div><div class="line">    <span class="keyword">private</span> String path;</div><div class="line">    <span class="keyword">private</span> Animation operatingAnim;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> FILE_SELECT_CODE = <span class="number">1</span>;</div><div class="line">    <span class="keyword">private</span> ServiceConnection sc = <span class="keyword">new</span> ServiceConnection() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onServiceConnected</span><span class="params">(ComponentName componentName, IBinder iBinder)</span> </span>&#123;</div><div class="line">            musicService = ((MusicService.MyBinder) iBinder).getService();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onServiceDisconnected</span><span class="params">(ComponentName componentName)</span> </span>&#123;</div><div class="line">            musicService = <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">bindServiceConnection</span><span class="params">()</span> </span>&#123;</div><div class="line">        Intent intent = <span class="keyword">new</span> Intent(PlayMusicActivity.<span class="keyword">this</span>, MusicService.class);</div><div class="line">        startService(intent);</div><div class="line">        bindService(intent, sc, <span class="keyword">this</span>.BIND_AUTO_CREATE);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        requestWindowFeature(Window.FEATURE_NO_TITLE);</div><div class="line">        setContentView(R.layout.activity_play_music);</div><div class="line">        KLog.d(<span class="string">"hint"</span>, <span class="string">"ready to new MusicService"</span>);</div><div class="line">        <span class="comment">//musicService = new MusicService();</span></div><div class="line">        KLog.d(<span class="string">"hint"</span>, <span class="string">"finish to new MusicService"</span>);</div><div class="line">        <span class="comment">//绑定服务</span></div><div class="line">        bindServiceConnection();</div><div class="line">        <span class="comment">//初始化控件</span></div><div class="line">        init();</div><div class="line">        doPlayMusic();</div><div class="line"></div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doPlayMusic</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="comment">//        MusicSeekBar.setProgress(musicService.mp.getCurrentPosition());</span></div><div class="line"><span class="comment">//        MusicSeekBar.setMax(musicService.mp.getDuration());</span></div><div class="line"><span class="comment">//        musicStatus = (TextView)this.findViewById(R.id.MusicStatus);</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (musicService.mp.isPlaying()) &#123;</div><div class="line">                MusicCurrentTime.setText(MilliSecondDurtion2TimeFormat.Ms2TimeStringFormat(musicService.mp.getCurrentPosition()));</div><div class="line">                MusicSeekBar.setProgress(musicService.mp.getCurrentPosition());</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            MusicSeekBar.setOnSeekBarChangeListener(<span class="keyword">new</span> SeekBar.OnSeekBarChangeListener() &#123;</div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onProgressChanged</span><span class="params">(SeekBar seekBar, <span class="keyword">int</span> progress, <span class="keyword">boolean</span> fromUser)</span> </span>&#123;</div><div class="line"></div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStartTrackingTouch</span><span class="params">(SeekBar seekBar)</span> </span>&#123;</div><div class="line"></div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="meta">@Override</span></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStopTrackingTouch</span><span class="params">(SeekBar seekBar)</span> </span>&#123;</div><div class="line">                    <span class="comment">//musicService.playOrPause();</span></div><div class="line">                    musicService.mp.seekTo(seekBar.getProgress());</div><div class="line">                    <span class="comment">// musicService.playOrPause();</span></div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">            handler.postDelayed(runnable, <span class="number">100</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</div><div class="line">        MusicSeekBar.setProgress(<span class="number">0</span>);</div><div class="line">        handler = <span class="keyword">new</span> Handler();</div><div class="line">        handler.post(runnable);</div><div class="line">        musicService.mp.setOnCompletionListener(<span class="keyword">new</span> MediaPlayer.OnCompletionListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCompletion</span><span class="params">(MediaPlayer mp)</span> </span>&#123;</div><div class="line">                MediaPlayer mp1 = <span class="keyword">new</span> MediaPlayer();</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    mp1.setDataSource(musicService.getMusicDir().get(musicService.getMusicDir().size() - <span class="number">1</span>).getMusicPath());</div><div class="line">                    mp1.prepare();</div><div class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                MusicCurrentTime.setText(MilliSecondDurtion2TimeFormat.Ms2TimeStringFormat(mp.getDuration()));</div><div class="line">                btnPlayOrPause.setImageDrawable(getResources().getDrawable(R.drawable.ic_play_music));</div><div class="line">                MusicAlbumCover.clearAnimation();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">super</span>.onResume();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</div><div class="line">        MusicAlbumCover = (ImageView) findViewById(R.id.MusicAlbumCover);</div><div class="line">        operatingAnim = AnimationUtils.loadAnimation(<span class="keyword">this</span>, R.anim.tip);</div><div class="line">        LinearInterpolator lin = <span class="keyword">new</span> LinearInterpolator();</div><div class="line">        operatingAnim.setInterpolator(lin);</div><div class="line">        MusicSeekBar = (SeekBar) findViewById(R.id.MusicSeekBar1);</div><div class="line">        ic_list = (ImageView) findViewById(R.id.ic_list);</div><div class="line">        adjustVolume = (ImageView) findViewById(R.id.adjustVolume);</div><div class="line">        MusicTime = (TextView) <span class="keyword">this</span>.findViewById(R.id.MusicTime);</div><div class="line">        btnPlayOrPause = (ImageView) <span class="keyword">this</span>.findViewById(R.id.BtnPlayorPause);</div><div class="line">        MusicCurrentTime = (TextView) findViewById(R.id.MusicCurrentTime);</div><div class="line">        MusicName = (TextView) findViewById(R.id.MusicName);</div><div class="line">        MusicSeekBar.setEnabled(<span class="keyword">false</span>);</div><div class="line">        ic_list.setOnClickListener(<span class="keyword">this</span>);</div><div class="line">        adjustVolume.setOnClickListener(<span class="keyword">this</span>);</div><div class="line">        btnPlayOrPause.setOnClickListener(<span class="keyword">this</span>);</div><div class="line"></div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</div><div class="line">        unbindService(sc);</div><div class="line">        <span class="keyword">super</span>.onDestroy();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</div><div class="line">        <span class="keyword">switch</span> (v.getId()) &#123;</div><div class="line">            <span class="keyword">case</span> R.id.BtnPlayorPause:</div><div class="line">                <span class="keyword">if</span> (musicService.getMusicDir().size() &lt;= <span class="number">0</span>) &#123;</div><div class="line">                    Toast.makeText(<span class="keyword">this</span>, <span class="string">"您的列表为空"</span>, Toast.LENGTH_SHORT).show();</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">if</span> (musicService.mp.isPlaying()) &#123;</div><div class="line">                        MusicAlbumCover.clearAnimation();</div><div class="line">                        btnPlayOrPause.setImageDrawable(getResources().getDrawable(R.drawable.ic_play_music));</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        <span class="keyword">if</span> (operatingAnim != <span class="keyword">null</span>) &#123;</div><div class="line">                            MusicAlbumCover.startAnimation(operatingAnim);</div><div class="line">                        &#125;</div><div class="line">                        btnPlayOrPause.setImageDrawable(getResources().getDrawable(R.drawable.ic_pause_music));</div><div class="line">                    &#125;</div><div class="line">                    musicService.playOrPause();</div><div class="line"></div><div class="line">                &#125;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> R.id.ic_list:</div><div class="line">                <span class="keyword">if</span> (musicService.mp.isPlaying()) &#123;</div><div class="line">                    btnPlayOrPause.setImageDrawable(getResources().getDrawable(R.drawable.ic_play_music));</div><div class="line">                    musicService.playOrPause();</div><div class="line">                &#125;</div><div class="line">                Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_GET_CONTENT);</div><div class="line">                intent.setType(<span class="string">"*/*"</span>);</div><div class="line">                Log.i(<span class="string">"file"</span>, <span class="string">"==================="</span>);</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    startActivityForResult(intent, FILE_SELECT_CODE);</div><div class="line">                &#125; <span class="keyword">catch</span> (android.content.ActivityNotFoundException ex) &#123;</div><div class="line">                    Toast.makeText(getApplication(), <span class="string">"Please install a File Manager."</span>, Toast.LENGTH_SHORT).show();</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> R.id.adjustVolume:</div><div class="line">                showPopupWindow(v);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">default</span>:</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</div><div class="line">        <span class="keyword">switch</span> (requestCode) &#123;</div><div class="line">            <span class="keyword">case</span> FILE_SELECT_CODE:</div><div class="line">                <span class="keyword">if</span> (resultCode == RESULT_OK) &#123;</div><div class="line">                    <span class="comment">// Get the Uri of the selected file</span></div><div class="line">                    Uri uri = data.getData();</div><div class="line">                    path = FileUtils.getPhotoPathFromContentUri(getApplication(), uri);</div><div class="line">                    Log.i(<span class="string">"File's Path is"</span>, path + <span class="string">""</span>);</div><div class="line">                    <span class="keyword">if</span> (path != <span class="keyword">null</span>) &#123;</div><div class="line">                        String splitPath[] = path.split(<span class="string">"\\/"</span>);</div><div class="line">                        String MusicNameInPath[] = splitPath[splitPath.length - <span class="number">1</span>].split(<span class="string">"\\."</span>);</div><div class="line">                        MusicName.setText(MusicNameInPath[MusicNameInPath.length - <span class="number">2</span>]);</div><div class="line">                        MusicInfo musicInfo = <span class="keyword">new</span> MusicInfo();</div><div class="line">                        musicInfo.setMusicPath(path);</div><div class="line">                        musicService.addMusic(musicInfo);</div><div class="line"></div><div class="line">                        <span class="keyword">try</span> &#123;</div><div class="line">                            MediaPlayer mp = <span class="keyword">new</span> MediaPlayer();</div><div class="line">                            mp.setDataSource(musicService.getMusicDir().get(musicService.getMusicDir().size() - <span class="number">1</span>).getMusicPath());</div><div class="line">                            mp.prepare();</div><div class="line">                            MusicCurrentTime.setText(<span class="string">"00:00"</span>);</div><div class="line">                            MusicTime.setText(MilliSecondDurtion2TimeFormat.Ms2TimeStringFormat(mp.getDuration()));</div><div class="line">                            MusicSeekBar.setMax(musicService.mp.getDuration());</div><div class="line">                            MusicSeekBar.setProgress(<span class="number">0</span>);</div><div class="line">                            musicService.playOrPause();</div><div class="line">                            <span class="keyword">if</span> (operatingAnim != <span class="keyword">null</span>) &#123;</div><div class="line">                                MusicAlbumCover.startAnimation(operatingAnim);</div><div class="line">                            &#125;</div><div class="line">                            btnPlayOrPause.setImageDrawable(getResources().getDrawable(R.drawable.ic_pause_music));</div><div class="line">                            MusicSeekBar.setEnabled(<span class="keyword">true</span>);</div><div class="line">                        &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">                            e.printStackTrace();</div><div class="line">                        &#125;</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        Toast.makeText(getApplication(), <span class="string">"文件管理器异常。"</span>, Toast.LENGTH_LONG).show();</div><div class="line">                    &#125;</div><div class="line"></div><div class="line"></div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showPopupWindow</span><span class="params">(View view)</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">// 一个自定义的布局，作为显示的内容</span></div><div class="line">        View contentView = LayoutInflater.from(<span class="keyword">this</span>).inflate(</div><div class="line">                R.layout.popwindow_adjust_volume, <span class="keyword">null</span>);</div><div class="line"></div><div class="line">        <span class="keyword">final</span> PopupWindow popupWindow = <span class="keyword">new</span> PopupWindow(contentView,</div><div class="line">                ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT, <span class="keyword">true</span>);</div><div class="line"></div><div class="line">        <span class="keyword">int</span> popupWidth = view.getMeasuredWidth();    <span class="comment">//  获取测量后的宽度</span></div><div class="line">        <span class="keyword">int</span> popupHeight = view.getMeasuredHeight();  <span class="comment">//获取测量后的高度</span></div><div class="line">        <span class="keyword">int</span>[] location = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</div><div class="line">        view.getLocationOnScreen(location);</div><div class="line">        View ParentView = (View) view.getParent();</div><div class="line">        <span class="keyword">int</span> ParentViewHeight = ParentView.getHeight();</div><div class="line">        popupWindow.showAtLocation(view, Gravity.NO_GRAVITY, (location[<span class="number">0</span>] + view.getWidth() / <span class="number">2</span>) - popupWidth / <span class="number">2</span>, location[<span class="number">1</span>] - popupHeight - ParentViewHeight+(ParentViewHeight-popupHeight)/<span class="number">2</span>);</div><div class="line">        popupWindow.setTouchable(<span class="keyword">true</span>);</div><div class="line">        popupWindow.setTouchInterceptor(<span class="keyword">new</span> View.OnTouchListener() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouch</span><span class="params">(View v, MotionEvent event)</span> </span>&#123;</div><div class="line">                KLog.i(<span class="string">"mengdd"</span>, <span class="string">"onTouch : "</span>);</div><div class="line"></div><div class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">                <span class="comment">// 这里如果返回true的话，touch事件将被拦截</span></div><div class="line">                <span class="comment">// 拦截后 PopupWindow的onTouchEvent不被调用，这样点击外部区域无法dismiss</span></div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        <span class="comment">// 如果不设置PopupWindow的背景，无论是点击外部区域还是Back键都无法dismiss弹框</span></div><div class="line">        <span class="comment">// 我觉得这里是API的一个bug</span></div><div class="line">        popupWindow.setBackgroundDrawable(getResources().getDrawable(R.mipmap.theme_dark_blue_bg));</div><div class="line"></div><div class="line">        <span class="comment">// 设置好参数之后再show</span></div><div class="line">        <span class="comment">//popupWindow.showAsDropDown(view);</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/Zecheng-Chow/img/diy_player.png" alt="1"></p>
<blockquote>
<p>demo连接：<a href="https://git.oschina.net/chang1286080091/PT-3280CInAndroid" target="_blank" rel="external">https://git.oschina.net/chang1286080091/PT-3280CInAndroid</a></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/21/用Service结合Activity完成自己的播放器/" data-id="ciytp29oh000jlm9kie01ta9b" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Service-Android/">Service Android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mongodb可视化管理工具显示数据问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/03/mongodb可视化管理工具显示数据问题/" class="article-date">
  <time datetime="2016-11-03T07:11:36.000Z" itemprop="datePublished">2016-11-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/03/mongodb可视化管理工具显示数据问题/">mongodb可视化管理工具显示数据问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>团队前期在选择数据库时决定采用MongoDB ，MongoDB是一个基于分布式文件存储的数据库，由 C++ 语言编写，旨在为 WEB 应用提供可扩展的高性能数据存储解决方案。MongoDB 是一个介于关系数据库和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。</p>
<p>但是在使用数据库可视化管理工具时出现了问题：</p>
<p> <img src="/Yan-Chang/img/4.png" alt="4"></p>
<p>无论是采用Robomongo还是MongoVUE都无法显示数据库的内容，就是无法通过工具来查看数据库中的内容。后来上网查找以后才知道是MongoDB 的版本问题，如果依旧采用MongoDB 2.0以上版本是不会出现这个问题的，但是如果想用MongoDB 3.0版本以上才会出现这个问题。解决这个问题有以下三个方案：</p>
<ul>
<li>最简单的方法就是继续使用MongoDB 2.0以上版本（不包括3以上版本）；</li>
</ul>
<ul>
<li>使用其他版本MongoDB 可视化管理工具：</li>
</ul>
<ul>
<li>针对这个问题，后来查询发现是两个版本所运行的引擎有所不同，  查询了才发现MongoDB 3.0以上版本是运行在wiredTiger 引擎，MongoDB 2.0以上版本是运行在MMAPv1引擎上，Robomongo和MongoVUE目前的版本只支援 MMAPv1 引擎，所以Robomongo和MongoVUE并不能查看数据库数据。</li>
</ul>
<p>主要操作过程：</p>
<h5 id="第一步："><a href="#第一步：" class="headerlink" title="第一步："></a>第一步：</h5><p>首先安装好数据库以后，查看是否具有以下目录：</p>
<p><img src="/Yan-Chang/img/1.png" alt="1"></p>
<h5 id="第二步："><a href="#第二步：" class="headerlink" title="第二步："></a>第二步：</h5><p>打开data文件，查看里面的文件类型：</p>
<p> <img src="/Yan-Chang/img/3.png" alt="3"></p>
<p>如果是以上类型说明启动mmapv1 存储引擎；但mongodb3.0以后采用的都是wiredTiger 存储引擎，导致data文件里存储的都是wt文件。</p>
<h5 id="第三步："><a href="#第三步：" class="headerlink" title="第三步："></a>第三步：</h5><p>如果是wt文件请删除wt文件以及log下的日志文件。</p>
<h5 id="第四步："><a href="#第四步：" class="headerlink" title="第四步："></a>第四步：</h5><p>停止MongoDB服务：</p>
<p> <img src="/Yan-Chang/img/5.jpg" alt="5"></p>
<h5 id="第五步："><a href="#第五步：" class="headerlink" title="第五步："></a>第五步：</h5><p>修改引擎</p>
<p> <img src="/Yan-Chang/img/6.jpg" alt="6"></p>
<p>（数据目录就是data的位置）</p>
<h5 id="第六步："><a href="#第六步：" class="headerlink" title="第六步："></a>第六步：</h5><p>重新启动服务</p>
<p> 重启成功后，打开Robomongo就会查看到数据库中的数据</p>
<p> <img src="/Yan-Chang/img/7.png" alt="7"></p>
<p>对于习惯使用Robomongo用想用MongoDB 3.0以上版本的用户第三种方法是不错的选择。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/03/mongodb可视化管理工具显示数据问题/" data-id="ciytp29od000glm9ktgl2y1rz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mongodb-可视化/">mongodb,可视化</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Echarts的简单引用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/02/Echarts的简单引用/" class="article-date">
  <time datetime="2016-11-02T14:29:44.000Z" itemprop="datePublished">2016-11-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/02/Echarts的简单引用/">Echarts的简单引用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Echarts的简单引用"><a href="#Echarts的简单引用" class="headerlink" title="Echarts的简单引用"></a>Echarts的简单引用</h1><p>ECharts，一个纯 Javascript 的图表库，可以流畅的运行在 PC 和移动设备上，兼容当前绝大部分浏览器（IE8/9/10/11，Chrome，Firefox，Safari等），底层依赖轻量级的 Canvas 类库 ZRender，提供直观，生动，可交互，可高度个性化定制的数据可视化图表。</p>
<h2 id="丰富的图表类型"><a href="#丰富的图表类型" class="headerlink" title="丰富的图表类型"></a>丰富的图表类型</h2><p>ECharts 提供了常规的折线图，柱状图，散点图，饼图，K线图，用于统计的盒形图，用于地理数据可视化的地图，热力图，线图，用于关系数据可视化的关系图，treemap，多维数据可视化的平行坐标，还有用于 BI 的漏斗图，仪表盘，并且支持图与图之间的混搭。</p>
<h3 id="折线图"><a href="#折线图" class="headerlink" title="折线图"></a>折线图</h3><h2 id=""><a href="#" class="headerlink" title=""></a><img src="/Wei-Chen/img/broken_line.png" alt=""></h2><h3 id="柱状图"><a href="#柱状图" class="headerlink" title="柱状图"></a>柱状图</h3><h2 id="-1"><a href="#-1" class="headerlink" title=""></a><img src="/Wei-Chen/img/bar.png" alt=""></h2><h3 id="饼图"><a href="#饼图" class="headerlink" title="饼图"></a>饼图</h3><p><img src="/Wei-Chen/img/pie.png" alt=""></p>
<h2 id="引入Echarts"><a href="#引入Echarts" class="headerlink" title="引入Echarts"></a>引入Echarts</h2><h3 id="模块化单文件引入（推荐）"><a href="#模块化单文件引入（推荐）" class="headerlink" title="模块化单文件引入（推荐）"></a>模块化单文件引入（推荐）</h3><p>echarts开发了专门的合并压缩工具echarts-optimizer，通过依赖关系分析同时去除与echarts.js的重复模块后为echarts的每一个图表类型单独打包生成一个独立文件，根据应用需求可实现图表类型按需加载，总的来说模块化单文件引入分以下四步</p>
<ol>
<li><p>为ECharts准备一个具备大小（宽高）的Dom（当然可以是动态生成的）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">`&lt;div id=&quot;main&quot; style=&quot;height:400px;&quot;&gt;&lt;/div&gt;`</div></pre></td></tr></table></figure>
</li>
<li><p>通过script标签引入echarts主文件(echarts库可从github上下载)<br>​    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">`&lt;script src=&quot;./js/echarts.js&quot;&gt;&lt;/script&gt;`</div></pre></td></tr></table></figure>
</li>
<li><p>为模块加载器配置echarts的路径，从当前页面链接到echarts.js所在目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">require.config(&#123;</div><div class="line">     paths: &#123;</div><div class="line">         echarts: &apos;../js/dist&apos;</div><div class="line">     &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>动态加载echarts及所需图表然后在回调函数中开始使用,当你确保同一页面已经加载过echarts，再使用时直接require(‘echarts’).init(dom)就行<br>​    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">require(</div><div class="line">     [</div><div class="line">         &apos;echarts&apos;,</div><div class="line">         &apos;echarts/chart/line&apos;,   // 按需加载所需图表，如需动态类型切换功能，别忘了同时加载相应图表</div><div class="line">         &apos;echarts/chart/bar&apos;</div><div class="line">     ],</div><div class="line">     function (ec) &#123;</div><div class="line">         var myChart = ec.init(document.getElementById(&apos;main&apos;));</div><div class="line">         var option = &#123;</div><div class="line">             ...</div><div class="line">         &#125;</div><div class="line">         myChart.setOption(option);</div><div class="line">     &#125;</div><div class="line"> );</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="标签式单文件引入"><a href="#标签式单文件引入" class="headerlink" title="标签式单文件引入"></a>标签式单文件引入</h3><p>如果你的项目本身并不是基于模块化开发的，或者是基于CMD规范（如使用的是seajs），那么引入基于AMD模块化的echarts可能并不方便，我们建议你采用srcipt标签式引入，忘掉require。Srcipt标签引入echarts后将可以直接使用两个全局的命名空间：echarts，zrender，可参考ECharts标签式引入，需要注意的是excanvas依赖body标签插入Canvas节点去判断Canvas的支持，如果你把引用echarts的script标签放置head内在IE8-的浏览器中会出现报错，解决的办法就是把标签移动到body内（后）。<br>​        </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;body&gt;</div><div class="line">&lt;div id=&quot;main&quot; style=&quot;height:400px;&quot;&gt;&lt;/div&gt;</div><div class="line">...</div><div class="line">&lt;script src=&quot;example/www2/js/dist/echarts-all.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script&gt;</div><div class="line">    var myChart = echarts.init(document.getElementById(&apos;main&apos;));</div><div class="line">    var option = &#123;</div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">    myChart.setOption(option);</div><div class="line">&lt;/script&gt;</div><div class="line">&lt;/body&gt;</div></pre></td></tr></table></figure>
<p>可以直接引入的单文件如下：</p>
<p>dist/echarts-all.js : 经过压缩，全图表，包含world，china以及34个省市级地图数据</p>
<p>source/echarts-all.js : 未压缩，全图表，包含world，china以及34个省市级地图数据，可用于调试</p>
<h2 id="简单的Echarts实例"><a href="#简单的Echarts实例" class="headerlink" title="简单的Echarts实例"></a>简单的Echarts实例</h2><h3 id="下面是一个简单的柱状图完整代码"><a href="#下面是一个简单的柱状图完整代码" class="headerlink" title="下面是一个简单的柱状图完整代码"></a>下面是一个简单的柱状图完整代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</div><div class="line">&lt;title&gt;ECharts&lt;/title&gt;</div><div class="line">&lt;!-- 引入 echarts.js --&gt;</div><div class="line">&lt;script src=&quot;echarts.min.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;!-- 为ECharts准备一个具备大小（宽高）的Dom --&gt;</div><div class="line">&lt;div id=&quot;main&quot; style=&quot;width: 600px;height:400px;&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot;&gt;</div><div class="line">    // 基于准备好的dom，初始化echarts实例</div><div class="line">    var myChart = echarts.init(document.getElementById(&apos;main&apos;));</div><div class="line"></div><div class="line">    // 指定图表的配置项和数据</div><div class="line">    var option = &#123;</div><div class="line">        title: &#123;</div><div class="line">            text: &apos;ECharts 简单示例&apos;</div><div class="line">        &#125;,</div><div class="line">        tooltip: &#123;&#125;,</div><div class="line">        legend: &#123;</div><div class="line">            data:[&apos;销量&apos;]</div><div class="line">        &#125;,</div><div class="line">        xAxis: &#123;</div><div class="line">            data: [&quot;衬衫&quot;,&quot;羊毛衫&quot;,&quot;雪纺衫&quot;,&quot;裤子&quot;,&quot;高跟鞋&quot;,&quot;袜子&quot;]</div><div class="line">        &#125;,</div><div class="line">        yAxis: &#123;&#125;,</div><div class="line">        series: [&#123;</div><div class="line">            name: &apos;销量&apos;,</div><div class="line">            type: &apos;bar&apos;,</div><div class="line">            data: [5, 20, 36, 10, 10, 20]</div><div class="line">        &#125;]</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    // 使用刚指定的配置项和数据显示图表。</div><div class="line">    myChart.setOption(option);</div><div class="line">&lt;/script&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h3 id="在浏览器中打开效果如下图："><a href="#在浏览器中打开效果如下图：" class="headerlink" title="在浏览器中打开效果如下图："></a>在浏览器中打开效果如下图：</h3><p><img src="/Wei-Chen/img/echartDemo.png" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/02/Echarts的简单引用/" data-id="ciytp29nr0001lm9kkm2svtol" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Echarts/">Echarts</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Nginx-服务器的搭建与通过配置解决同源跨域问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/01/Nginx-服务器的搭建与通过配置解决同源跨域问题/" class="article-date">
  <time datetime="2016-11-01T15:21:24.000Z" itemprop="datePublished">2016-11-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/01/Nginx-服务器的搭建与通过配置解决同源跨域问题/">Nginx 服务器的搭建与通过配置解决同源跨域问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本团队在主打产品CRM中通过前端AngularJS调用后台NodeJS接口用了Ajax技术，但是这样问题就出现了，由于NodeJs启动服务与AngularJs用Ajax调用接口同样来自于同一台IP的服务器但是端口不一样，所以产生了同源跨域问题。为此我记录一下内容为了解决同源跨域问题。</p>
<h2 id="什么是同源跨域问题呢？"><a href="#什么是同源跨域问题呢？" class="headerlink" title="什么是同源跨域问题呢？"></a>什么是同源跨域问题呢？</h2><p>首先浏览器安全的基石是”同源政策”（same-origin policy）。最初，它的含义是指，A网页设置的 Cookie，B网页不能打开，除非这两个网页”同源”。所谓”同源”指的是”三个相同”。仅有同协议，同端口和同IP才可以被称为同源。</p>
<p>同源政策的目的，是为了保证用户信息的安全，防止恶意的网站窃取数据。 设想这样一种情况：A网站是一家银行，用户登录以后，又去浏览其他网站。如果其他网站可以读取A网站的 Cookie，会发生什么？ 很显然，如果 Cookie 包含隐私（比如存款总额），这些信息就会泄漏。更可怕的是，Cookie 往往用来保存用户的登录状态，如果用户没有退出登录，其他网站就可以冒充用户，为所欲为。因为浏览器同时还规定，提交表单不受同源政策的限制。 由此可见，”同源政策”是必需的，否则 Cookie 可以共享，互联网就毫无安全可言了。</p>
<p>之后，随着互联网的发展，”同源政策”越来越严格。目前，如果非同源，共有三种行为受到限制。</p>
<ul>
<li>Cookie、LocalStorage和IndexDB无法读取</li>
<li>DOM无法获取</li>
<li>AJAX请求不能发送（本项目所拥有的问题）</li>
</ul>
<p>虽然这些限制是必要的，但是有时很不方便，合理的用途也受到影响。下面，我将详细介绍，如何规避上面三种限制。</p>
<p>其中AJAX请求不能发送是本项目拥有的问题，虽然有些浏览器，例如Chrome可以输入以下命令进入安全模式可以暂时忽略跨域问题，但是这治标不治本。</p>
<p><strong>Mac使用方法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$  open -a /Applications/Google\ Chrome.app --args --disable-web-security --user-data-dir</div></pre></td></tr></table></figure>
<h2 id="通过配置Nginx来解决同源跨域问题"><a href="#通过配置Nginx来解决同源跨域问题" class="headerlink" title="通过配置Nginx来解决同源跨域问题"></a>通过配置Nginx来解决同源跨域问题</h2><p>我使用的环境是64位 Ubuntu 14.04。nginx依赖以下模块：</p>
<ul>
<li>gzip模块需要 zlib 库</li>
</ul>
<ul>
<li>rewrite模块需要 pcre 库</li>
</ul>
<ul>
<li>ssl 功能需要openssl库</li>
</ul>
<p>以下省略三个库的安装过程，直接进入配置详情讲解。</p>
<p>例如：</p>
<p><strong>NodeJS为 <a href="http://192.168.10.107:3000" target="_blank" rel="external">http://192.168.10.107:3000</a> 为例</strong></p>
<p><strong>AngularJs调用端口为8000端口</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">location / </div><div class="line">&#123;     </div><div class="line">	root   qiantai;   #项目名 必须在根目录路径下 项目文件夹</div><div class="line">	index  index.html index.htm;  #项目主页  必须在项目目录路径下</div><div class="line">&#125;</div><div class="line">location ^~ /u-routeasasoe/ &#123;</div><div class="line">	proxy_pass  http://192.168.10.107:3000;   #转发地址及相应端口号</div><div class="line">	proxy_redirect    off;  </div><div class="line">	proxy_set_header  Host $host;</div><div class="line">	proxy_set_header  X-Real-IP  $remote_addr;  </div><div class="line">	proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>则需要将所有为<code>/u-routeasaseo</code>开头的接口统统转化成 <strong><a href="http://192.168.10.107:3000" target="_blank" rel="external">http://192.168.10.107:3000</a></strong>发出的变为同IP,同端口，同协议保证同源已解决问题。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/01/Nginx-服务器的搭建与通过配置解决同源跨域问题/" data-id="ciytp29o20006lm9kr0r8m6hu" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Nginx-同源跨域/">Nginx 同源跨域</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/01/hello-world/" class="article-date">
  <time datetime="2016-11-01T13:57:35.000Z" itemprop="datePublished">2016-11-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/01/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/01/hello-world/" data-id="ciytp29ob000elm9kwj395x4y" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AngularJs-路由/">AngularJs 路由</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Echarts/">Echarts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx-同源跨域/">Nginx 同源跨域</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NodeJS-异步/">NodeJS 异步</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Service-Android/">Service Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular2/">angular2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb-可视化/">mongodb,可视化</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/AngularJs-路由/" style="font-size: 10px;">AngularJs 路由</a> <a href="/tags/Echarts/" style="font-size: 10px;">Echarts</a> <a href="/tags/Nginx-同源跨域/" style="font-size: 10px;">Nginx 同源跨域</a> <a href="/tags/NodeJS-异步/" style="font-size: 10px;">NodeJS 异步</a> <a href="/tags/Service-Android/" style="font-size: 10px;">Service Android</a> <a href="/tags/angular2/" style="font-size: 10px;">angular2</a> <a href="/tags/mongodb-可视化/" style="font-size: 10px;">mongodb,可视化</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/02/06/FFmpeg-快速起步文档/">FFmpeg  快速起步文档</a>
          </li>
        
          <li>
            <a href="/2016/11/21/angular2快速起步/">angular2快速起步</a>
          </li>
        
          <li>
            <a href="/2016/11/21/NodeJS-异步编程的简解/">NodeJS 异步编程的简解</a>
          </li>
        
          <li>
            <a href="/2016/11/21/自定义指令的学习和路由的学习/">自定义指令的学习和路由的学习</a>
          </li>
        
          <li>
            <a href="/2016/11/21/用Service结合Activity完成自己的播放器/">用Service结合Activity完成自己的播放器</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 3dimension Team<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>